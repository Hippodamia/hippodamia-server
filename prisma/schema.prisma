// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:dev.sqlite"
}

model User {
  id       Int           @id @default(autoincrement())
  qqId     String?       @unique
  nick     String?       @unique
  prefix   String?
  coins    BigInt        @default(0)
  rankings RaceRanking[]
}

// 代表一个玩家的一个比赛
model RaceRecord {
  id      Int           @id @default(autoincrement())
  channel String
  time    DateTime
  rank    RaceRanking[]
  mode    String
}

// 代表一个玩家在一个比赛中的排名
model RaceRanking {
  id     Int        @id @default(autoincrement())
  rank   Int
  user   User       @relation(references: [id], fields: [userId])
  userId Int
  race   RaceRecord @relation(fields: [raceId], references: [id])
  raceId Int
}

model Shop {
  id    Int        @id @default(autoincrement())
  name  String?
  desc  String?
  items ShopItem[]
}

model ShopItem {
  id     Int     @id @default(autoincrement())
  name   String?
  desc   String?
  price  BigInt  @default(0)
  shop   Shop    @relation(fields: [shopId], references: [id])
  shopId Int
}
